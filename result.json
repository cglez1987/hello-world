{"branch": "origin/master", "commit": "Update Jenkinsfile", "commitHash": "b774047c7d1350fb0846b8c2a7775056894a513b", "date": "2021-02-04 21:12:48", "diff": "@@ -13,17 +13,19 @@ pipeline {\n                 sh 'ls -l'\n             }\n         }\n-        stage(\"Planification\") { \n-            when {branch 'master'}\n-\t\t\tenvironment { \n+        stage(\"Release\"){\n+            environment { \n \t\t\t\tGIT_AUTH = credentials('GitHub-UserPass') \n \t\t\t}\n             steps{\n-\t\t\t\tsh('''\n-\t\t\t\t\tgit config --local credential.helper \"!f() { echo username=\\\\$GIT_AUTH_USR; echo password=\\\\$GIT_AUTH_PSW; }; f\"\n-\t\t\t\t    git tag -a v1.8 -m ${BUILD_TAG}\n-\t\t\t\t\tgit push --tags origin\n-\t\t\t\t''')\n+                echo \"====++++Creating release with tag++++====\"\n+                script{\n+                    tagVersion = input(id: 'tagVersion', message: 'Enter the tag version: ', parameters: [string(defaultValue: '', description: '', name: 'Tag Version')])\n+                }\n+\t\t\t\tsh \"git config --local credential.helper '!f() { echo username=\\\\$GIT_AUTH_USR; echo password=\\\\$GIT_AUTH_PSW; }; f'\"\n+                sh  \"git fetch --tags\"\n+\t\t\t\tsh  \"git tag -a ${tagVersion} -m ${BUILD_TAG}\"\n+\t\t\t\tsh\t\"git push --tags origin\"\n             }\n         }\n \t}\n", "path": "Jenkinsfile", "printDiff": "\u001b[93mRelease\u001b[0m", "reason": "Forbidden words", "stringsFound": ["Planification", "Release"]}
{"branch": "origin/cglez1987-patch-1", "commit": "Putting tags in jenkinfile\n", "commitHash": "c27974dd809cb9cb201bddaa6119afaa44c84977", "date": "2021-02-03 22:55:22", "diff": "@@ -9,64 +9,17 @@ pipeline {\n                 dir(\"${TEMP}\"){\n                     sh 'ls -l'\n                 }\n-                echo \"Estoy afueraaa\"\n+                echo \"Testing tagging strategy\"\n                 sh 'ls -l'\n             }\n         }\n-    }\n-    /*\n-    stages{\n-        stage(\"Prepare environment\"){\n-            steps{\n-                sh 'cd network'\n-                sh 'ls -l'\n-            }\n-        }\n-        stage(\"Get AWS parameters\"){\n-            agent {\n-                docker {\n-                   image 'amazon/aws-cli'\n-                   args  \"--entrypoint=''\"\n-                }\n-            }\n-            steps{\n-                script{\n-                    echo \"preparing environment\"\n-                    if (\"${env.GIT_BRANCH}\" == 'master')\n-                    {\n-                        echo \"This is a master change\"\n-                        TEMP = \"carlos\"\n-                        echo \"TEMP value is: ${TEMP}\"\n-                    }\n-                    else\n-                    {\n-                        echo \"Nop........!!!!\"\n-                        TEMP = \"joseee\"\n-                    }\n-                    sh \"ls \\$(ls -l | grep ${TEMP})\"\n-                }\n-            }\n-        }\n-        stage(\"Validate terraform\") {\n-            agent {\n-                docker {\n-                   image 'hashicorp/terraform:light'\n-                   args  \"--entrypoint=''\"\n-                }\n-            }\n-            steps{\n-                echo \"========Initializing terraform modules========\"\n-                sh 'ls -l'\n-                sh 'terraform init'\n-                sh 'terraform plan'\n-            }\n-        }\n         stage(\"Planification\") { \n             when {branch 'master'}\n             steps{\n                 echo \"====++ Enter to planification stage ++++====\"\n-                sh 'ls -l'\n+                sh \"git tag -a v1.1 -m ${BUILD_TAG}\"\n+\t\t\t\tsh \"git push --tags origin master\"\n             }\n         }\n-    }*/\n+\t}\n }\n", "path": "Jenkinsfile", "printDiff": "\u001b[93mPlanification\u001b[0m", "reason": "Forbidden words", "stringsFound": ["Planification"]}
